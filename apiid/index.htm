<!--<html>
<head>
	<script src="//vk.com/js/api/openapi.js" type="text/javascript"></script>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<script>
window.onload = (function() {
    VK.init({
          apiId: 4983778 //ВАШ_IP_ID
        });
    function authInfo(response) 
    {
      if (response.session)
      {
        document.getElementById('id').innerHTML = "Your ID: " + response.session.mid;
      } 
      else 
      {
        document.getElementById('id').innerHTML = 'Вы не авторизованы вконтакте.';
      }
    }
    VK.Auth.getLoginStatus(authInfo);
});
</script>
<div id='id'></div>

</body>
</html>-->
<script src="//vk.com/js/api/openapi.js"></script>;
<script type="text/javascript">
    VK.init({
            apiId: 4983778
        });
</script>
<script>
function authInfo(response) {    
    if(response.status=='connected') {	// если пользователь залогинен в ВК     
        if(typeof(response.session.user) == 'undefined') { // этого поля нет 
                //тогда, когда пользователь был залогинен ранее
                VK.Api.call('users.get', { uid: response.session.mid }, function(r) { 
                    $('#VKInfo').html(r.response[0].first_name+' '+r.response[0].last_name); 
                    $('#VKInfo').append('user_id: '+response.session.mid); });
   }else {
        // если авторизация прошла только что (от VK.Auth.login(authInfo);), то имя и фамилия уже будут в ответе   
        $('#VKInfo').html(response.session.user.first_name+' '+response.session.user.last_name);
        $('#VKInfo').append('user_id: '+response.session.mid);}
       }else {
        VK.Auth.login(authInfo); // опционально можем спалиться и вызвать всплывающее окно авторизации
    }
}

$(function() { VK.Auth.getLoginStatus(authInfo); }); // проверяем наличие входа в ВК, ответ отправляем в функцию обработчик
</script>

<span id="VKInfo"> </span>
